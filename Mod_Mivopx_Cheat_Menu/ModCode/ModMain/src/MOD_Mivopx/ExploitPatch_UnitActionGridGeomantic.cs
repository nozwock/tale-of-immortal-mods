using HarmonyLib;
using TaleOfImmortalCheat;

namespace MOD_Mivopx;

[HarmonyPatch(typeof(UnitActionGridGeomantic), "Init")]
internal class ExploitPatch_UnitActionGridGeomantic
{
	public static UnitActionGridGeomantic _instance;

	private static bool _isThisActive;

	public static bool IsThisActive
	{
		get
		{
			return _isThisActive;
		}
		set
		{
			_isThisActive = value;
		}
	}

	private static void Postfix(UnitActionGridGeomantic __instance)
	{
		_instance = __instance;
		if (_instance != null && IsThisActive && Game.ConfMgr.worldBlockGeomantic != null)
		{
			ModMain.Log("----- ----- ----- ----- -----");
			ModMain.Log("ExploitPanel - Geomantic - Called");
			ModMain.Log("----- ----- ----- ----- -----");
			ConfWorldBlockGeomantic worldBlockGeomantic = Game.ConfMgr.worldBlockGeomantic;
			ModMain.Log($"searchRange {worldBlockGeomantic.searchRange}");
			worldBlockGeomantic._searchRange.value = 15;
			ModMain.Log($"Modified - searchRange {worldBlockGeomantic.searchRange}");
		}
	}
}
